<html>
    <head>
        <title>Bokeh Example</title>
        <meta charset="iso-8859-1" />
        <script type="text/javascript" src="./assets/js/bokeh-3.1.1.min.js"></script>
        <script type="text/javascript" src="./assets/js/bokeh-gl-3.1.1.min.js"></script>
        <script type="text/javascript" src="./assets/js/bokeh-widgets-3.1.1.min.js"></script>
        <script type="text/javascript" src="./assets/js/bokeh-tables-3.1.1.min.js"></script>
        <script type="text/javascript" src="./assets/js/bokeh-mathjax-3.1.1.min.js"></script>

        <script defer src="./assets/js/pyscript.js"></script>
        <link rel="stylesheet" href="./assets/css/pyscript.css"/>
        <link rel="stylesheet" href="./assets/css/style.css" />
    </head>
    <body>
        <py-tutor>
            <section class="pyscript">
                <div id="myplot" style="width: 50vw; height: 50vh; margin: 0 auto"></div>

                <py-config>
                    packages = [
                      "numpy",
                      "pandas",
                      "bokeh",
                      "xyzservices"
                    ]
                </py-config>

                <py-script id="main">
                    import json
                    import pyodide
                    import numpy as np

                    from js import Bokeh, console, JSON

                    from bokeh.embed import json_item
                    from bokeh.plotting import figure
                    from bokeh.resources import CDN

                    # data
                    x = np.linspace(0, np.pi, num=50)
                    y = np.sin(x)

                    # create a new plot with default tools, using figure
                    p = figure(
                      title="Simple line example", 
                      x_axis_label='x', 
                      y_axis_label='y',
                      #match_aspect=True,
                      sizing_mode='scale_both')
                    
                    # add a circle renderer with x and y coordinates, size, color, and alpha
                    p.line(x, y, legend_label="Temp.", line_width=2)
                    p_json = json.dumps(json_item(p, "myplot"))

                    Bokeh.embed.embed_item(JSON.parse(p_json))
                </py-script>
            </section>
        </py-tutor>
    </body>
</html>